{% assign current_variant = product.selected_or_first_available_variant %}
<div class="card card-product card-product-style-1 text-start rounded-0" data-product-grid>
  <span class="badges">
    {%- liquid
      assign onSale = false
      assign soldOut = false
      
      if current_variant and current_variant.compare_at_price > current_variant.price or product.compare_at_price > product.price
      assign onSale = true
      endif 
      if current_variant and current_variant.available == false or product.available == false
      assign soldOut = true
      endif 
      assign productBadges = settings.custom_badges | newline_to_br | split: '<br />'
      -%}
      {%- for badge in productBadges -%}
        {%- assign badgeData = badge | strip | split: ':' -%}
        {%- assign badgeLabel = badgeData[1] | strip -%}
        {%- if product.tags contains badgeData[0] -%}
          <span class="badge badge-right badge-warning" >
            {{ badgeLabel }}
          </span>
        {%- endif -%}
      {%- endfor -%}
      {% if onSale %}
        <span class="badge badge-right badge-danger" >
          {{ 'products.product.on_sale' | t | escape }}
        </span>
      {% endif %}
      
      {% if soldOut %}
        <span class="badge badge-right badge-warning">
          {{ 'products.product.sold_out' | t | escape }}
        </span>
      {% endif %}
    </span>
    
    <div class="card-img text-center {% if product.featured_image.size == 0 %}bg-gray-300{% endif %}" >
      <div data-type="slider" class="product-images-wrapper pr-lg-4 text-center">
        <div class="container">
          <div class="row">
            <slider-element class="swiper-container  position-relative arrow-outside">
              <div class="swiper swiper-slider" data-slider='{
                "loop": false,
                "slidesPerView": "1",
                "spaceBetween": 15,
                "grabCursor": true,
                "navigation": {
                  "nextEl": ".swiper-button-next",
                  "prevEl": ".swiper-button-prev"
                },
                "pagination": {
                  "el": ".swiper-pagination"
                }
              }' role="tree">
              <div class="swiper-wrapper">
                {% for media in product.media %}
                  {% if media.media_type == 'image' %}
                    {% assign image = media %}
                    <div class="swiper-slide carousel-cell d-flex align-items-center product--media" data-mediaID="{{ image.id }}" role="treeitem">
                      <img srcset="
                        {%- if image.src.width >= 350 -%}{{ image.src | image_url: width: 350 }} 350w,{%- endif -%}
                        {%- if image.src.width >= 550 -%}{{ image.src | image_url: width: 550 }} 550w,{%- endif -%}
                        {%- if image.src.width >= 750 -%}{{ image.src | image_url: width: 750 }} 750w,{%- endif -%}
                        {%- if image.src.width >= 991 -%}{{ image.src | image_url: width: 991 }} 991w,{%- endif -%}
                        {%- if image.src.width >= 1200 -%}{{ image.src | image_url: width: 1200 }} 1200w,{%- endif -%} 
                        {%- if image.src.width >= 1500 -%}{{ image.src | image_url: width: 1500 }} 1500w,{%- endif -%} 
                        {{ image.src | image_url }} {{ image.src.width }}w"
                        src="{{ image.src | image_url: width: 1500 }}" loading="lazy"
                        data-variant-title="{{ image.alt | escape }}"
                        sizes="(min-width: {{ settings.container_width }}) {{ settings.container_width }}, 100vw"
                        alt="{{ image.alt | escape }}"
                        width="{{ image.src.width }}"
                        height="{{ image.src.width | divided_by: image.src.aspect_ratio | round }}"
                      >
                      </div>
                      {% elsif media.media_type == 'external_video' or media.media_type == 'video' %}
                      <div class="swiper-slide carousel-cell d-flex align-items-center product--media" data-mediaID="{{ media.id }}" role="treeitem">
                        {%- render 'media', media: media -%}
                      </div>
                    {% endif %}
                  {% endfor %}
                </div>
                <div class="swiper-button-next icon-next" {% if product.images.size <= 1 %}style="display: none !important;"{% endif %}></div>
                <div class="swiper-button-prev icon-previous" {% if product.images.size <= 1 %}style="display: none !important;"{% endif %}></div>
              </div>    
            </slider-element>
          </div>
        </div>
      </div> 
      {%comment%}
      {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}
      
      {% if current_variant and current_variant.image %}
        {% assign secondaryImage = product.featured_image %}
        <a href="{{ product.url | within: collection }}" class="d-block product-link" >
          <img
            srcset="
            {%- if current_variant.image.width >= 360 -%}{{ current_variant.image | image_url: width: 360 }} 360w,{%- endif -%}
            {%- if current_variant.image.width >= 533 -%}{{ current_variant.image | image_url: width: 533 }} 533w,{%- endif -%}
            {%- if current_variant.image.width >= 720 -%}{{ current_variant.image | image_url: width: 720 }} 720w,{%- endif -%}
            {{ current_variant.image | image_url }} {{ current_variant.image.width }}w"
            src="{{ current_variant.image | image_url: width: 533 }}"
            
            sizes="(min-width: {{ settings.container_width }}) {{ settings.container_width | minus: 150 | divided_by: 4 }}px, (min-width: 768px) calc((100vw - 130px) / 2), 50vw"                
            loading="lazy"
            data-feauredImage
            alt="{{ current_variant.image.alt | default: current_variant.title | escape }}"
            width="{{ current_variant.image.width }}"
            height="{{ current_variant.image.width | divided_by: current_variant.image.aspect_ratio }}"
          > 
          {%- if settings.show_secondary_image and secondaryImage -%}
            <img 
              srcset="
              {%- if secondaryImage.width >= 360 -%}{{ secondaryImage | image_url: width: 360 }} 360w,{%- endif -%}
              {%- if secondaryImage.width >= 533 -%}{{ secondaryImage | image_url: width: 533 }} 533w,{%- endif -%}
              {%- if secondaryImage.width >= 720 -%}{{ secondaryImage | image_url: width: 720 }} 720w,{%- endif -%}
              {{ secondaryImage | image_url }} {{ secondaryImage.width }}w"
              src="{{ secondaryImage | image_url: width: 533 }}"
              
              sizes="(min-width: {{ settings.container_width }}) {{ settings.container_width | minus: 150 | divided_by: 4 }}px, (min-width: 768px) calc((100vw - 130px) / 2), 50vw"                
              
              loading="lazy"
              class="w-100"
              data-hoverImage
              alt="{{ secondaryImage.alt | default: current_variant.title | escape }}"
              width="{{ secondaryImage.width }}"
              height="{{ secondaryImage.width | divided_by: secondaryImage.aspect_ratio }}" >
            {%- endif -%}
          </a>
          {% elsif product.featured_image.size > 0 %}
          <a href="{{ product.url | within: collection }}" class="d-block product-link" >
            <img
              srcset="
              {%- if product.featured_image.width >= 360 -%}{{ product.featured_image | image_url: width: 360 }} 360w,{%- endif -%}
              {%- if product.featured_image.width >= 533 -%}{{ product.featured_image | image_url: width: 533 }} 533w,{%- endif -%}
              {%- if product.featured_image.width >= 720 -%}{{ product.featured_image | image_url: width: 720 }} 720w,{%- endif -%}
              {{ product.featured_image | image_url }} {{ product.featured_image.width }}w"
              src="{{ product.featured_image | image_url: width: 533 }}"
              
              sizes="(min-width: {{ settings.container_width }}) {{ settings.container_width | minus: 150 | divided_by: 4 }}px, (min-width: 768px) calc((100vw - 130px) / 2), 50vw"                
              loading="lazy"
              data-feauredImage
              alt="{{ product.featured_image.alt | default: current_variant.title | escape }}"
              width="{{ product.featured_image.width }}"
              height="{{ product.featured_image.width | divided_by: product.featured_image.aspect_ratio }}"
            >
              {%- if settings.show_secondary_image and product.images[1] -%}
                <img srcset="
                  {%- if product.images[1].width >= 360 -%}{{ product.images[1] | image_url: width: 360 }} 360w,{%- endif -%}
                  {%- if product.images[1].width >= 533 -%}{{ product.images[1] | image_url: width: 533 }} 533w,{%- endif -%}
                  {%- if product.images[1].width >= 720 -%}{{ product.images[1] | image_url: width: 720 }} 720w,{%- endif -%}
                  {{ product.images[1] | image_url }} {{ product.images[1].width }}w"
                  src="{{ product.images[1] | image_url: width: 533 }}"
                  sizes="(min-width: {{ settings.container_width }}) {{ settings.container_width | minus: 150 | divided_by: 4 }}px, (min-width: 768px) calc((100vw - 130px) / 2), 50vw"
                  loading="lazy"
                  class="w-100"
                  data-hoverImage
                  alt="{{ product.images[1].alt | default: current_variant.title | escape }}"
                  width="{{ product.images[1].width }}"
                  height="{{ product.images[1].width | divided_by: product.images[1].aspect_ratio }}" >
                {%- endif -%}
              </a>
              {% elsif settings.no_image_replacement != blank %}
              <a href="{{ product.url | within: collection }}" class="d-block product-link" >
                <img src="{{ settings.no_image_replacement | image_url }}"
                  srcset="
                  {%- if settings.no_image_replacement.width >= 360 -%}{{ settings.no_image_replacement | image_url: width: 360 }} 360w,{%- endif -%}
                  {%- if settings.no_image_replacement.width >= 533 -%}{{ settings.no_image_replacement | image_url: width: 533 }} 533w,{%- endif -%}
                  {%- if settings.no_image_replacement.width >= 720 -%}{{ settings.no_image_replacement | image_url: width: 720 }} 720w,{%- endif -%}
                  {{ settings.no_image_replacement | image_url }} {{ settings.no_image_replacement.width }}w"
                  sizes="(min-width: {{ settings.container_width }}) {{ settings.container_width | minus: 150 | divided_by: 4 }}px, (min-width: 768px) calc((100vw - 130px) / 2), 50vw"
                  loading="lazy"
                  class="w-100"
                  data-feauredImage
                  alt="{{ settings.no_image_replacement.alt | default: current_variant.title | escape }}"
                  width="{{ settings.no_image_replacement.width }}"
                  height="{{ settings.no_image_replacement.width | divided_by: settings.no_image_replacement.aspect_ratio }}" >
                </a>
                {% else %}
                {{ 'product-' | append: current | placeholder_svg_tag: 'img-fluid' }}
              {% endif %}
              {%endcomment%} 
              
            </div>
            <div class="card-body">
              <div class="row no-gutter">
                <div class="col-8">
                  <h6 class="card-title m-0 font-family-base" data-proTitle = "{{ product.title }}" >
                    <a class="product-link lh-base" href="{{ product.url | within: collection }}">{{ product.title }}</a>
                  </h6>
                </div>
                <div class="col-4 text-end">
                  {%- if current_variant.compare_at_price > current_variant.price -%}<span compare_price-data class="h6 text-gray-600 mr-2 money text-decoration-line-through" data-comparePrice>{{ current_variant.compare_at_price | money }}</span>{%- endif -%}
                  <span class="h6 actual-price money" actual_price-data data-currentPrice>{{ current_variant.price | money }}</span>
                </span>
              </div>
            </div>
          </div>
          <div>
            
            {% form 'product', product, data-productid: product.id, id: product_form_id, class: "mt-4", data-product-form: "", data-product-id: product.id, data-type: 'add-to-cart-form', data-format: format %}
              <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
              {% unless product.has_only_default_variant %}
                <div class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url | within: collection }}" data-type="variant-select">
                  <div class="product-form__input product-form__input--dropdown mb-4" data-optionindex="{{ forloop.index }}">
                    <label class="fw-medium text-uppercase font-size-sm mb-2" for="Option-{{ section.id }}-{{ forloop.index0 }}" title="{{ option.selected_value }}">
                      {{ option.name }}: <span class="selected-option">{{ option.selected_value }}</span>
                    </label>
                    
                    
                    <div class="select">
                      <select select_variants id="Option-{{ section.id }}-{{ forloop.index0 }}" class="form-select variant_selector" name="options[{{ option.name | escape }}]" form="product-form-{{ product.id }}">
                        {% for variant in product.variants %}
                          {% if variant.available and  variant.inventory_quantity > 0 and variant.inventory_management == 'shopify' %}
                            <option variant-id="{{ variant.id }}"  value="{{ value | escape }}">
                              {{ variant.title }}
                            </option>
                          {% endif %} 
                        {%- endfor -%}
                      </select>
                    </div>
                    
                    {%comment%}
                    <addon-variant-radios class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url | within: collection }}" data-type="variant-radios">
                      {%- for option in product.options_with_values -%}
                        <fieldset class="js product-form__input mb-4 {% if option.name == 'Color' or option.name == 'color' %}color-swatch{% endif %}" data-optionindex="{{ forloop.index }}">
                          <legend class="form__label fw-medium text-uppercase font-size-sm mb-2">{{ option.name }}: <span class="selected-option">{{ option.selected_value }}</span></legend>
                          <ul class="list-unstyled d-flex my-0 py-0">
                            {%- for value in option.values -%}
                              {%- capture swatchID -%}swatch-{{ product.id }}{% if format %}-{{ format }}{% endif %}-{{ option.name | handleize }}-{{ value | handleize }}{%- endcapture -%}
                              <li class="me-2">
                                <div class="swatch {% if option.name == 'Color' or option.name == 'color' %}color-swatch{% endif %}">
                                  <input dataindex="{{forloop.index}}" option-data type="radio" class="form-control" id="{{ swatchID }}"
                                    name="{{ option.name }}" value="{{ value | escape }}"
                                    {% if option.selected_value == value %}checked{% endif %}
                                    data-handle="{{ value | handle }}">
                                    <label class="form-label swatch-label {{ value }}" for="{{ swatchID }}" title="{{ value }}"> {% unless option.name == 'Color' or option.name == 'color' %} {{ value }} {% endunless %}  </label>
                                  </div>
                                </li>
                              {%- endfor -%}
                            </ul>
                          </fieldset>
                        {%- endfor -%}
                        {%endcomment%}
                      </addon-variant-radios>
                    </div>
                  </div>
                {% endunless %}
                <script addon-data-ProductJson class="variantsJSON-{{ product.id }}"  type="application/json">
                  {{ product.variants | json }}
                </script>
              {% endform %}
            </div>
              <div class="card-footer bg-transparent border-0">
              <quantity-box>
                <div class="quantity-wrapper mx-auto mb-2" quantity-box data-qty-container="{{current_variant.id}}">
                  <label for="Quantity" class="d-none" title="{{ 'products.product.quantity.label' | t }}">{{ 'products.product.quantity.label' | t }}</label>
                  <div class="input-group input-group-sm">
                    <div class="input-group-prepend">
                      <a href="#" class="input-group-text" rel="nofollow" aria-label="{{ 'products.product.quantity.decrease' | t: product: product.title | escape }}" title="{{ 'products.product.quantity.decrease' | t: product: product.title | escape }}" data-for="decrease" data-quantity-btn>
                        <span class="btn-decrease"><span class="icon-minus"></span></span>
                        <span class="visually-hidden">{{ 'products.product.quantity.decrease' | t: product: product.title | escape }}</span>
                      </a>
                    </div>
                    <input title = {{product.title}} src="{{ product.featured_image | img_url: "50x50"  }}" data-index="{{ forloop.index }} type="number" name="quantity" aria-label="{{ 'products.product.quantity.input_label' | t: product: product.title | escape }}" value="0" step="1" min="0"
                      inputmode="numeric" data-qty-input-box class="quantity form-control text-center"  data-productId="{{  product.selected_or_first_available_variant.id }}"  readonly>
                      <div class="input-group-append">
                        <a href="#" class="input-group-text" rel="nofollow" aria-label="{{ 'products.product.quantity.increase' | t: product: product.title | escape }}" title="{{ 'products.product.quantity.increase' | t: product: product.title | escape }}" data-for="increase" data-quantity-btn>
                          <span class="btn-increase"><span class="icon-plus"></span></span>
                          <span class="visually-hidden">{{ 'products.product.quantity.increase' | t: product: product.title | escape }}</span>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
                </quantity-box>
</div>
            
            